{{ define "main" }}
<!-- posts-template:custom -->
<!-- posts-template:custom -->
<main class="container mx-auto px-4 my-8">
  <header class="mb-8">
    <h1 class="text-3xl font-semibold">{{ .Title | default "Posts" }}</h1>
    {{ with .Description }}<p class="text-neutral-500 mt-2">{{ . }}</p>{{ end }}
  </header>

  {{/* Use all regular pages in this section, sorted newest-first. Avoid filtering by Type. */}}
  {{ $ordered := .RegularPages.ByDate.Reverse }}
  {{ $p := .Paginate $ordered }}

  {{ if not (gt (len $p.Pages) 0) }}
    <p>No posts found.</p>
  {{ else }}
    <div class="grid gap-6">
      {{ range $p.Pages }}
        <article class="border rounded-xl p-5">
          <h2 class="text-2xl font-medium">
            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
          </h2>
          <div class="text-sm text-neutral-500 mt-1">
            {{ with .Date }}{{ .Format "Jan 2, 2006" }}{{ end }} · {{ .ReadingTime }} min read
          </div>
          {{ with .Summary }}<p class="mt-3">{{ . | plainify }}</p>{{ end }}
          <p class="mt-3"><a href="{{ .RelPermalink }}">Read more →</a></p>
        </article>
      {{ end }}
    </div>

    {{ template "_internal/pagination.html" . }}
  {{ end }}
</main>
{{ end }}

