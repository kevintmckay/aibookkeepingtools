{{ define "main" }}
<main class="container mx-auto px-4 my-8 taxonomy">
  <header class="mb-8">
    <h1 class="text-3xl font-semibold">{{ .Title }}</h1>
    {{ with .Description }}<p class="text-neutral-500 mt-2">{{ . }}</p>{{ else }}
      <p class="text-neutral-500 mt-2">Explore topics across the site.</p>
    {{ end }}
  </header>

  {{/* Collect all terms, sort by usage count desc (then alpha) */}}
  {{ $terms := .Data.Terms.Alphabetical }}
  {{ $sorted := sort $terms "Count" "desc" }}
  {{ if lt (len $sorted) 1 }}
    <p>No terms found.</p>
  {{ else }}
    <div class="terms-grid">
      {{ range $sorted }}
        <a class="term-chip" href="{{ .Page.RelPermalink }}">
          <span class="term-name">{{ .Page.Title }}</span>
          <span class="term-count">{{ .Count }}</span>
        </a>
      {{ end }}
    </div>
  {{ end }}
</main>
{{ end }}

